spring.application.name=stampsys-back

# Server
server.port=8080
server.forward-headers-strategy=native
server.servlet.session.cookie.same-site=None
server.servlet.session.cookie.secure=true

# CORS settings
app.cors.allowed-origins=https://onestamp.vercel.app,http://localhost:5173,http://127.0.0.1:5173

# DataSource (PostgreSQL)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://192.168.104.54:5432/stampsys}
spring.datasource.username=${DATABASE_USERNAME:springuser}
spring.datasource.password=${DATABASE_PASSWORD:p@ss}
spring.datasource.driver-class-name=org.postgresql.Driver

# Frontend
app.frontend.base-url=${FRONTEND_URL:https://onestamp.vercel.app}

# MyBatis Configuration
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.example.stampsysback.entity
mybatis.configuration.map-underscore-to-camel-case=true

# JPA / Hibernate Configuration
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Schema generation strategy
spring.jpa.hibernate.ddl-auto=none

# OAuth2 client (Microsoft)
spring.security.oauth2.client.registration.microsoft.client-id=${AZURE_CLIENT_ID}
spring.security.oauth2.client.registration.microsoft.client-secret=${AZURE_CLIENT_SECRET}
spring.security.oauth2.client.registration.microsoft.client-name=Microsoft
spring.security.oauth2.client.registration.microsoft.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.microsoft.scope=openid,profile,email,offline_access,User.Read
spring.security.oauth2.client.registration.microsoft.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# provider: use issuer-uri so Spring can discover endpoints
spring.security.oauth2.client.provider.microsoft.issuer-uri=https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0

# Microsoft logout
app.post-logout-redirect-uri=${FRONTEND_URL:https://onestamp.vercel.app}/login

# Setup default database connection
app.setup.default-jdbc-url=${DATABASE_URL:jdbc:postgresql://192.168.104.54:5432/stampsys}
app.setup.default-username=${DATABASE_USERNAME:springuser}
app.setup.default-password=${DATABASE_PASSWORD:p@ss}

# Setup key
app.setup.secret=esdfggxcvkkhgopijhuytrewqasdfghjkl